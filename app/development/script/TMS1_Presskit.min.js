function BackgroundGallery(a,b,c){function d(a){k=a||4,m=!0;var b=s.indexOf(i);b++,b===s.length&&(b=0),i=s[b],e()}function e(){TweenLite.to(r,k,{opacity:0,onComplete:f})}function f(){r.css({"background-image":"url("+i+")"}),g()}function g(){m=!1,TweenLite.to(r,k,{opacity:l})}var h,i,j=18e3,k=4,l=1,m=!1,n=this,o=c,p=!0,q=!0,r=$(a),s=b;i=s[0],$(r).click(function(){m||q||(d(1),p&&(p=!1,o.cancel()),n.stop(),n.start())}),this.start=function(){h=setInterval(function(){d(),q=!1},j)},this.stop=function(){clearInterval(h)},this.setDim=function(a){l=a,m||TweenLite.to(r,k/8,{opacity:a})},this.reset=function(){l=1}}function BonusContent(a,b,c,d){function e(){var a=Math.floor(Math.random()*l.length);p.attr("src","img/"+l[a]),q.text(m[a]),o.show(),c.dim(.95),d.hideMenu(),l.splice(a,1),m.splice(a,1),l.length<1&&(clearInterval(h),n.unbind("click"))}function f(){n.css({opacity:"0"}),n.show(),TweenLite.to(n,1,{opacity:.3}),setTimeout(function(){g()},j)}function g(){TweenLite.to(n,1,{opacity:0,onComplete:function(){n.hide()}})}var h,i=12e3,j=5e3,k=.1,l=["bonus1.jpg","bonus2.jpg","bonus3.jpg"],m=["We'll never stop looking...","I found something... Oscar's yellow scarf.","This is his drawing... it was in the basement. They had him."],n=$(a),o=$(b),p=$("#bonusImage"),q=$("#bonusText");n.hide(),n.click(function(){e(),g()}),o.find(".close:eq(0)").click(function(){o.hide(),c.hide(),d.showMenu()}),h=setInterval(function(){var a=10*Math.random(),b=10*k;a>b&&f()},i)}function Cast(a){function b(){TweenLite.to(f,.5,{opacity:.2}),g.show(),TweenLite.to(g,1,{opacity:1})}function c(){TweenLite.to(f,.5,{opacity:1}),TweenLite.to(g,1,{opacity:0,onComplete:function(){g.hide()}})}var d,e=$(a),f=e.children(".castImg:eq(0)"),g=e.children(".castText:eq(0)"),h=!1;g.css({position:"absolute",top:"0",left:"0",opacity:"0"}),e.click(function(){h?c():b(),h=!h}),this.resize=function(){d=f.height()+"px",g.height()<=f.height()&&g.css({height:d})},this.resize()}function CenterElement(a){var b=$(a);this.reset=function(){b.css({position:"fixed","z-index":"10",top:"50%",left:"50%","margin-left":-1*b.width()/2+"px","margin-top":-1*b.height()/2+"px"})},this.reset(),this.getEl=function(){return b}}function Content(a,b,c,d,e){function f(){j=!1}var g=$(a),h=g.find(d+":eq(0)"),i=this,j=!1,k=(100-b)/2,l=$("#ta2");g.css({position:"absolute",width:b+"%","margin-left":k+"%","margin-right":k+"%",opacity:"0",display:"none"}),e&&g.css({background:"none"}),this.resize=function(){},this.resize(),this.show=function(){j=!0,g.show(),c.setDim(.1),TweenLite.to(g,.3,{opacity:1,ease:Quad.easeInOut,onComplete:function(){f()}})},this.hide=function(a){j=!0,c.setDim(1),TweenLite.to(g,.3,{opacity:0,ease:Quad.easeInOut,onComplete:function(){f(),g.hide(),a&&a.show()}})},d&&h.click(function(){i.hide(),l.fadeTo("fast",1)})}function FullscreenDiv(a){var b=$(a);this.resize=function(){b.css({position:"fixed","z-index":"0",top:"0",left:"0",width:window.innerWidth+"px",height:window.innerHeight+"px"})},this.resize()}function GalleryImage(a,b){function c(a){g.attr("src",a)}function d(b){$(a+":eq("+b+")").css({opacity:"1"})}function e(a){return src=a.children("img:eq(0)").attr("src")}var f=$(a),g=$(b).children("img:eq(0)"),h=0,i=$(a).length;f.each(function(){var a=$(this);a.css({opacity:"0.3"})}),$(a).click(function(){var a=$(this);h=a.index()-3,d(h),c(e(a))}),g.click(function(){h++,h===i&&(h=0);var b=e($(a+":eq("+h+")"));d(h),c(b)}),h=0,d(h)}function Menu(a,b,c,d,e){var f,g=$(a),h=new SimpleButton(c),i=new SimpleButton(d),j=this,k=h.getEl(),l=i.getEl(),m=$(b),n=e||null;g.css({position:"absolute",top:"0","z-index":"9000",left:"0",width:"100%"}),l.hide(),k.click(function(){j.open(),$("html, body").animate({scrollTop:0},1e3)}),l.click(function(){j.close()}),this.open=function(){TweenLite.to(g,.5,{top:0,ease:Quad.easeInOut}),null!=n&&n.dim(.8)},this.close=function(){TweenLite.to(g,.5,{top:f,ease:Quad.easeInOut}),null!=n&&n.hide()},m.each(function(){{var a=$(this);new SimpleButton(a)}a.click(function(){j.close()})}),this.showMenu=function(){g.css("opacity","0"),g.show(),TweenLite.to(g,.5,{opacity:.8})},this.hideMenu=function(){TweenLite.to(g,.5,{opacity:0,onComplete:function(){g.hide()}})},this.reset=function(){f=-1*g.height()+"px"},this.reset(),g.css({top:f})}function NavButton(a,b){var c=$(a),d=b;c.click(function(){d()})}function Overlay(a){function b(){c.hide()}var c=$(a);c.css("height",window.innerHeight+"px"),this.show=function(){c.show(),TweenLite.to(c,.5,{opacity:1})},this.hide=function(){TweenLite.to(c,.5,{opacity:0,onComplete:b})},this.dim=function(a){c.show(),TweenLite.to(c,.5,{opacity:a})},this.resize=function(){c.css("height",window.innerHeight+"px")}}function PositionedElement(a,b,c,d,e,f){var g=$(a),h=f,i=e;g.css({position:"fixed","z-index":"10",top:b+"%"}),g.css(0===c?{right:d+"%"}:{left:d+"%"}),this.reset=function(){g.css(g.width()>h?{width:h+"px"}:{width:i+"%"})},this.reset(),this.getEl=function(){return g}}function ScrollDiv(a,b,c){function d(a,b){if(h=b,o)setTimeout(function(){e()},h);else{var c,d;switch(d=l.width(),a){case"left":l.css({left:"0"}),c=n-d+"px";break;case"right":l.css({right:"0"}),c=-1*(n-d)+"px"}TweenLite.to(l,b,{x:c,ease:Quad.easeInOut,onComplete:e})}}function e(){k.delay(g).fadeTo(j,0,function(){f()})}function f(){k.hide(),null!=i&&i()}var g,h,i,j=500,k=$(a),l=$(a).children("img:eq(0)"),m=new CenterElement($(a).children(b+":eq(0)"))||null,n=window.innerWidth,o=c,p=this;k.css({position:"fixed",top:"0",left:"0","z-index":"10000"}),o&&k.css({"background-color":o}),l.css({position:"absolute",top:"0"}),this.resize=function(){var a=window.innerHeight,b=window.innerWidth;k.css({height:a+"px",width:b+"px"}),l.width()<b&&l.css({width:b+"px",height:"auto"}),l.height()<a&&l.css({height:a+"px",width:"auto"})},this.show=function(a,b,c,e,f){p.resize(),g=1e3*e,i=f||null;var h=c||0;k.css({opacity:"0"}),k.show(),m.reset(),k.delay(1e3*h).fadeTo(j,1,function(){d(a,b)})},this.totalTime=function(){return(g+2*j+1e3*h)/1e3},this.resize(),f()}function SimpleButton(a){var b=.7,c=.95,d=$(a);d.css({opacity:b,cursor:"pointer"}),d.mouseover(function(){TweenLite.to(d,.5,{opacity:c})}),d.mouseout(function(){TweenLite.to(d,.5,{opacity:b})}),this.getEl=function(){return d}}function trackEvent(a){_gaq.push(["_trackEvent","Click",a])}var KeyListener=function(){function a(a,c){b.push([a,c])}var b=[];return window.onkeyup=function(a){for(var c=a.keyCode?a.keyCode:a.which,d=0;d<b.length;d++)if(c===b[0][0]){var e=b[0][1];e()}},{setMethod:a}}(),TitleArt=function(a,b,c,d,e,f,g){function h(){TweenLite.from(o,2,{y:50,opacity:0,ease:Quad.easeInOut,delay:1}),setTimeout(function(){q||(q=!0,i())},n)}function i(){TweenLite.to(o,1,{opacity:0,onComplete:j})}function j(){o.hide(),TweenLite.to(p,2,{opacity:1})}function k(){q||m.reset()}function l(){q=!0,i()}var m=new PositionedElement(a,c,d,e,f,g),n=8e3,o=$(a),p=$(b),q=!1;return p.css("opacity","0"),{reset:k,cancel:l,arm:h}},VideoPlayer=function(){function a(a,b){e.src([{type:"video/webm",src:a+".webm"}]),e.poster(b)}function b(){var a=9/16,b=Math.round(1*f.parent().width()),d=Math.round(a*b);e.width(b),e.height(d),c()}function c(){f.css({margin:"10px auto 10px auto"})}function d(){e.pause()}var e=videojs("videoPlayer1"),f=$("#videoPlayer1");return $(".videoLink").click(function(){var b=$(this),c=b.attr("data-src"),d=b.attr("data-poster");a(c,d)}),{init:a,size:b,stop:d}}();VideoPlayer.init("http://download.starz.com/csid/sr_pk_opening_1410478790","img/gallery1.jpg");var _gaq=_gaq||[];_gaq.push(["_setAccount","XXX"]),_gaq.push(["_trackPageview"]),function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),$("[me]").click(function(){var a=$(this).attr("ui-data-target");trackEvent(a)}),$(function(){function a(){q.resize(),r.resize(),t.resize(),s.reset(),o.resize(),VideoPlayer.size(),p.reset();for(var a=0;a<E.length;a++)E[a].resize()}function b(a){v.fadeTo("fast",0),null!=D?a?D.hide(a):D.hide():a&&a.show(),D=a?a:null,VideoPlayer.stop()}function c(){p.showMenu(),o.hide(),u.start(),s.arm()}function d(){p.hideMenu(),o.show(),q.show("right",2,0,5,function(){r.show("left",4,0,3,function(){c()})})}function e(a){var b=a||0;if(0===l)for(var c=0;c<m.length;c++)l+=m[c].length;for(var d=0;d<m[b].length;d++){var g=new Image;g.src=m[b][d],g.onload=f(),d===m[b].length-1&&(b++,b<m.length&&e(b))}}function f(){k++,n.children("p").text("Loading image "+k+" of "+l+"..."),k==l&&(n.remove(),a(),d())}var g=["img/bg_intro2.jpg"],h=["img/gallery1.jpg","img/gallery2.jpg","img/gallery3.jpg","img/gallery4.jpg","img/gallery5.jpg","img/gallery6.jpg","img/gallery7.jpg","img/gallery8.jpg","img/gallery9.jpg","img/gallery10.jpg","img/gallery11.jpg","img/gallery12.jpg","img/gallery13.jpg","img/gallery14.jpg","img/gallery15.jpg","img/gallery16.jpg","img/gallery17.jpg","img/gallery18.jpg"],i=["img/bg_ta.jpg","img/bg_2.jpg","img/bg_3.jpg","img/bg_4.jpg","img/bg_5.jpg","img/bg_6.jpg","img/bg_7.jpg","img/bg_8.jpg","img/bg_9.jpg","img/bg_10.jpg","img/bg_11.jpg"],j=["img/character_1.jpg","img/character_2.jpg","img/character_3.jpg","img/character_4.jpg"],k=0,l=0,m=[i,h,g,j],n=$("#preloader"),o=new Overlay("#overlay"),p=new Menu("#menu",".menuOption","#menuToggleOn","#menuToggleOff",o),q=new ScrollDiv("#introFrame1",[".quote"],"#000"),r=new ScrollDiv("#introFrame2",[".quote"]),s=new TitleArt("#ta","#ta2",40,0,10,60,800),t=new FullscreenDiv("#keyBG"),u=new BackgroundGallery("#keyBG",i,s),v=$("#ta2"),w=new Content($("#about"),"90",u,".close"),x=new Content($("#gallery"),"90",u,".close",!0),y=new Content($("#cast"),"90",u,".close",!0),z=new Content($("#episode"),"90",u,".close"),A=new Content($("#production"),"90",u,".close"),B=new Content($("#video"),"90",u,".close"),C=new Content($("#starz"),"90",u,".close"),D=null,E=[];$(".castMember").each(function(){var a=new Cast($(this));E.push(a)}),new GalleryImage(".galleryImg","#selectedImage");new NavButton($('[data-nav="about"]'),function(){b(w)}),new NavButton($('[data-nav="gallery"]'),function(){b(x)}),new NavButton($('[data-nav="cast"]'),function(){b(y)}),new NavButton($('[data-nav="episode"]'),function(){b(z)}),new NavButton($('[data-nav="production"]'),function(){b(A)}),new NavButton($('[data-nav="video"]'),function(){b(B)}),new NavButton($('[data-nav="starz"]'),function(){b(C)}),BonusContent("#bigEars","#bonus",o,p);KeyListener.setMethod(27,p.close),window.onresize=function(){a()},e()});